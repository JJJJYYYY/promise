!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Promise=e()}(this,function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),o={PENDING:0,FULFILLED:1,REJECTED:2},u=function(){};function r(n){return"function"==typeof n}function i(e){return null!==e&&"object,function".includes(void 0===e?"undefined":n(e))}function c(n){return i(n)&&r(n.then)}var f="undefined"!=typeof window?window:{},s=f.MutationObserver||f.WebKitMutationObserver,a="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,y=void 0;if(a)y=process.nextTick;else if(s){var p=0,d=document.createTextNode(""),h=null;new s(function(){return h()}).observer(d,{characterData:!0}),y=function(n){h=n,d.data=++p}}else if(l){var v=new MessageChannel;y=function(n){v.port1.onmessage=n,v.port2.postMessage(0)}}else y=setTimeout;var E=y,b=function(n){return n},m=function(n){throw n};function w(n,e){E(function(){for(var t=0,o=n._sequence;o[t];){try{D(o[t],(0,o[t+n._status])(e))}catch(n){N(o[t],n)}t+=3}n._sequence=[]})}function _(n,e){n._status===o.PENDING&&(w(n,e),n._result=e,n._status=o.FULFILLED)}function D(n,e){if(n===e)N(n,new TypeError("x \u4e0d\u80fd\u4e0e promise \u76f8\u7b49"));else if(i(e)){var t=function(n,e){try{return e.then}catch(e){N(n,e)}}(n,e);if(r(t)){var o=!0;try{t.call(e,function(e){o&&D(n,e),o=!1},function(e){o&&N(n,e),o=!1})}catch(e){o&&N(n,e)}}else _(n,e)}else _(n,e)}function N(n,e){n._status===o.PENDING&&(w(n,e),n._result=e,n._status=o.REJECTED)}function g(n,e,t){var i,c=n._sequence,f=c.length;return c[f]=new n.constructor(u),c[f+o.FULFILLED]=r(e)?e:b,c[f+o.REJECTED]=r(t)?t:m,(i=n)._status!==o.PENDING&&w(i,i._result),c[f]}return function(){function n(t){e(this,n),this._status=o.PENDING,this._sequence=[],function(n,e){try{e(function(e){D(n,e)},function(e){N(n,e)})}catch(e){N(n,e)}}(this,t)}return t(n,[{key:"then",value:function(n,e){return g(this,n,e)}},{key:"catch",value:function(n){return g(this,null,n)}},{key:"finally",value:function(n){return g(this,n,n)}}],[{key:"resolve",value:function(e){return new n(function(n){return n(e)})}},{key:"reject",value:function(e){return new n(function(n,t){return t(e)})}},{key:"all",value:function(e){return new n(function(n,t){var o=[];function u(t){o.push(t),o.length===e.length&&n(o)}e.forEach(function(n){return c(n)&&n.then(u,t)})})}},{key:"race",value:function(e){return new n(function(n,t){e.forEach(function(e){return c(e)&&e.then(n,t)})})}}]),n}()});